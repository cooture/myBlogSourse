---
title: 汇编第八章：数据处理的两个基本问题
date: 2017-12-29 03:23:25
tags:
	- 汇编语言
	- 笔记
categories: 汇编语言
---

# 汇编第八章：数据处理的两个基本问题
> 章前言说的是对前面所有的内容是有总结性的，这里主要探讨两个问题：  
> 1. 处理的数据在什么地方？  
> 2. 处理的数据有多长？

定义两个符号**reg**和**sreg**
**reg**代表寄存器，包括：ax,bx,cx,dx,ah,al,bh,bl,ch,cl,dh,dl,sp,bp,si,di  
**sreg**代表段寄存器，包括：ds,ss,cs,es
## bx、si、di、bp的使用规则
> 三个规则，一会总结，字比较多，等会打。

1. 只有这四个寄存器可以用在[...]中进行寻址  
		
		mov ax,[bx]
		mov ax,[bx+si]
以下的是错误的

		mov ax,[cx]
		mov ax,[ax]

2. 这四个可以单独出现，但是组合的情况只有四种可以使用：bx和si、bx和di、bp和si、bp和di。  

		mov ax,[bx+si]
		mov ax,[bx+di]
		mov ax,[bp+si]
		mov ax,[bp+di+idata]
以下的是错误的

		mov ax.[bx+dp]
		mov ax,[si+di]
3. 只要使用[...]中bp寄存器时，若没有显式的给出段寄存器，则默认为段地址在ss中

		mov ax,[bp]			 ;(ax) = ((ss)*16+(bp))
		
## 机器指令处理的数据在什么地方
机器指令都是经过处理过的数据：1、读取。2、存入。3、运行  

所有处理的数据可以在三个地方：CPU内部、内存、端口（后面说先不用管）  
例如：

	mov bx,[0]				;内存
	mov bx,ax				;CPU内部ax寄存器
	mov bx,1				;CPU内部指令缓冲器
		
## 汇编语言中数据位置的表达
汇编语言用3个概念来表达数据的位置：  
1. 立即数[idata]  
例如：

	mov ax,1
	add bx,2000H
	or bx,00010000B
	mov al,'a'
  
以上   
2. 寄存器  
例如

	mov ax,bx
	push ds
以上  
3. 段地址和偏移地址  
例如

	mov ax,[bx]			;段地址默认在ds中

## 寻址方式
**五种寻址方式：**  
1. [idata] **直接寻址**  
2. [bx] **寄存器间接寻址**  
3. [bx+idata] **寄存器相对寻址**  
4. [bx+si] **基址变址寻址**  
5. [bx+si+idata] **相对基址变址寻址**

总结：**有两个寄存器就是基址变址，只要有idata就是相对（只有idata是直接寻址，只有一个寄存器是寄存器间接寻址）**

## 指令要处理的数据有多长
1. 通过寄存器名可以致命处理的数据长度
2. 在没有寄存器的情况下，用操作符“X ptr”指明要操作的长度，X可以是byte或者是word。   
例如

		mov word prt ds:[0],1
		inc word prt [bx]
		
		mov byte ptr ds:[0],1
		add byte ptr [bx],2
## 寻址的综合应用
> 主要就是类c语言的数组的操作，看看书看就行了。

## **div**
> 两种div方式！(被除数是除号之前的。)

1. 16位寄存器除以8位寄存器：16位做被除数放在AX里面。商在AL里，余数在AH里
2. 32位寄存器除以16位寄存器：高16位放在DX，低16位放在AX里，共32位做被除数。商在AX里，余数在DX里。  

**商都放在低位寄存器中，余数放在高位，除数放在一个内存单元或者reg中**
例如：

	16位/8位：
		div byte ptr ds:[0]		
		;(al) = (ax)/((ds)*16+0)
		;(ah) = (ax)mod((ds)*16+0)
	
	32位/8位：
		div word ptr ds:[0]		
		;(ax) = [(dx)*10000H + (ax)] / ((ds)*16+0)
		;(dx) = [(dx)*10000H + (ax)] mod ((ds)*16+0)
		
实际应用，例如100001/100,100001 = 186A1H

	mov dx,1H
	mov ax,86A1H
	mov bx,100
	div bx
	;商在AX里，余数在DX里
	
## dd
> dd（define double）,用于定义双精度字节，一个双精度占2个字，4个字节。

	data segment
		db 1
		dw 1
		dd 1
	data ends

上面这段：  
	1. 第一个数据是01H，在data:[0]处  
	2. 第二个数据是0001H，在data:[1] - data:[2]处  
	3. 第三个数据是00000001H，在data:[3] - data:[6]处  

## dup
和dd一样都是一个操作符，它是和db、dw、dd等数据定义伪指令配合使用的，用来进行数据的重复，比如：

	db 3 dup (0)
定义了3个字节，他们的值都是0，相当于

	db 0,0,0
又例如：

	db 3 dup (0,1,2)
定义了9个字节，分别是0,1,2,0,1,2,0,1,2,相当于

	db 0,1,2,0,1,2,0,1,2
**使用规范如下**

	db 重复次数 dup (内容)		;(重复的字节型数据)
	dw 重复次数 dup (内容)		;(重复的字型数据)
	dd 重复次数 dup (内容)		;(重复的双精度字型数据)


	


















